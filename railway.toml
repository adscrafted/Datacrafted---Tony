# Railway Configuration
# Use Nixpacks instead of Docker for automatic env var handling

[build]
# Use Nixpacks (default) - it automatically includes NEXT_PUBLIC_* vars during build
builder = "nixpacks"

[deploy]
# Start command: Sync Prisma schema to database then start Next.js
# Using ./node_modules/.bin/prisma to use project's installed version (6.13.0)
startCommand = "./node_modules/.bin/prisma db push --accept-data-loss && npm run start"
# Health check
healthcheckPath = "/api/health"
healthcheckTimeout = 300
# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
